

<link rel="stylesheet" href="http://127.0.0.1/project_cpp/w3.css">
<body>
<div id="main">
<p id="demo" style="position:fixed">_</p>
    <div id="col1" class="w3-red" style="width:100%">
<div id="col_wrap_1" style="position:absolute;width:100%;display:none" class="w3-blue"></div>
        <br><br><br><br><br><br><br><br> <br><br><br><br><br><br><br><br> <br><br><br><br><br><br><br><br>
    </div>
    <div id="col2" class=" w3-orange" style="width:100%;height:100%">
<div id="col_wrap_2" style="position:absolute;width:100%;display:none" class="w3-blue"></div>
    </div>
    <div id="col3" class="w3-teal" style="width:100%;height:100%">
<div id="col_wrap_3" style="position:absolute;width:100%;display:none" class="w3-blue"></div>
    </div>
    <div id="col4" class="w3-black" style="width:100%;height:100%" >
<div id="col_wrap_4" style="position:absolute;width:100%;" class="w3-blue">asdf</div>
    </div>
    <div id="col5" class="w3-white" style="width:100%;height:100%">
<div id="col_wrap_5" style="position:absolute;width:100%;display:none" class="w3-blue"></div>
    </div>
<br>
</div>
</body>
<script>
function _(a){return document.getElementById(a);}
//_("col1").innerHTML=_("col1").offsetHeight;
//_("col1").innerHTML=_("main").children.length;
var col_height=[];
for(i=1;i<=5;i++){
    col_height[i]=_("col"+i).offsetHeight
}
window.onscroll = function() {scroll_fun()};

function scroll_fun(){
    var tmp1=active_col=pre_active_col=0;
    for(i=1;i<=5;i++){
        if (document.body.scrollTop > tmp1){
            tmp1+=col_height[i];
            pre_active_col=active_col;
            active_col++;
       }
    }
    //if(document.body.scrollTop-tmp1)
    remaning_col=(tmp1-document.body.scrollTop)/col_height[active_col+1];
    if(remaning_col<.6){ 
        _("col_wrap_"+active_col).style.display="block"
        _("col_wrap_"+active_col).style.height=col_height[active_col]
        _("col_wrap_"+active_col).style.opacity = 1-2*remaning_col
    }else{_("col_wrap_"+active_col).style.display="none"}
_("demo").innerHTML=remaning_col+"_"+active_col+"_"+pre_active_col;

  
}
</script>
